!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jQuery")):"function"==typeof define&&define.amd?define(["jQuery"],e):"object"==typeof exports?exports.common=e(require("jQuery")):t.common=e(t.jQuery)}(this,function(t){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.userModule=e.utilsModule=e.commonModule=e.dialogModule=void 0;var o=i(3),s=n(o),a=i(2),r=n(a),l=i(4),u=n(l),d=i(5),c=n(d);e.dialogModule=r.default,e.commonModule=s.default,e.utilsModule=c.default,e.userModule=u.default},function(e,i){e.exports=t},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t){return t=parseInt(t,10),isNaN(t)||1>t?1:t}function s(t){return"DIALOG"+o(t)}function a(t,e){return e.options.closeButton===!0&&(t[e.services.localeService.t("fermer")]=function(){e.close()}),e.options.cancelButton===!0&&(t[e.services.localeService.t("annuler")]=function(){e.close()}),t}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},l=i(1),u=n(l),d=function(t,e,i){var n=this,l=function(t){var e=(0,u.default)("#"+s(t));if(e.length>0)throw"Dialog already exists at this level";return e=(0,u.default)('<div style="display:none;" id="'+s(t)+'"></div>'),(0,u.default)("body").append(e),e},d={size:"Medium",buttons:{},loading:!0,title:"",closeOnEscape:!0,confirmExit:!1,closeCallback:!1,closeButton:!1,cancelButton:!1},c=void 0,f=void 0,h=this;if(e="object"===("undefined"==typeof e?"undefined":r(e))?e:{},this.closing=!1,this.options=u.default.extend(d,e),this.services=t,this.level=o(i),this.options.buttons=a(this.options.buttons,this),/\d+x\d+/.test(this.options.size)){var p=this.options.size.split("x");f=p[1],c=p[0]}else switch(this.options.size){case"Full":f=bodySize.y-30,c=bodySize.x-30;break;case"Medium":c=Math.min(bodySize.x-30,730),f=Math.min(bodySize.y-30,520);break;default:case"Small":c=Math.min(bodySize.x-30,420),f=Math.min(bodySize.y-30,300);break;case"Alert":c=Math.min(bodySize.x-30,300),f=Math.min(bodySize.y-30,150)}this.$dialog=l(this.level),this.zIndex=5e3+parseInt(this.level,10);var v=function(){"function"==typeof h.options.closeCallback&&h.options.closeCallback(h.$dialog),h.closing===!1&&(h.closing=!0,h.close())};return this.$dialog.data("ui-dialog")&&this.$dialog.dialog("destroy"),this.$dialog.attr("title",this.options.title).empty().dialog({buttons:this.options.buttons,draggable:!1,resizable:!1,closeOnEscape:this.options.closeOnEscape,modal:!0,width:c,height:f,open:function(t){var e=(0,u.default)(t.currentTarget);e.dialog("widget").css("z-index",n.zIndex)},close:v}).dialog("open").addClass("dialog-"+this.options.size),this.options.loading===!0&&this.$dialog.addClass("loading"),"Full"===this.options.size&&!function(){var t=n;(0,u.default)(window).unbind("resize.DIALOG"+o(i)).bind("resize.DIALOG"+o(i),function(){t.$dialog.data("ui-dialog")&&t.$dialog.dialog("option",{width:bodySize.x-30,height:bodySize.y-30})})}(),this};d.prototype={close:function(){f.close(this.level)},setContent:function(t){this.$dialog.removeClass("loading").empty().append(t)},getId:function(){return this.$dialog.attr("id")},load:function(t,e,i){var n=this;this.loader={url:t,method:"undefined"==typeof e?"GET":e,params:"undefined"==typeof i?{}:i},u.default.ajax({type:this.loader.method,url:this.loader.url,dataType:"html",data:this.loader.params,beforeSend:function(){},success:function(t){n.setContent(t)}})},refresh:function(){if("undefined"==typeof this.loader)throw"Nothing to refresh";this.load(this.loader.url,this.loader.method,this.loader.params)},getDomElement:function(){return this.$dialog},getOption:function(t){return this.$dialog.data("ui-dialog")?this.$dialog.dialog("option",t):null},setOption:function(t,e){"buttons"===t&&(e=a(e,this)),this.$dialog.data("ui-dialog")&&this.$dialog.dialog("option",t,e)}};var c=function(){this.currentStack={}};c.prototype={create:function(t,e,i){this.get(i)instanceof d&&this.get(i).close();var n=new d(t,e,i);return this.currentStack[n.getId()]=n,n},get:function(t){var e=s(t);return e in this.currentStack?this.currentStack[e]:null},close:function(t){(0,u.default)(window).unbind("resize.DIALOG"+o(t)),this.get(t).closing=!0;var e=this.get(t).getDomElement();e.data("ui-dialog")&&e.dialog("close").dialog("destroy"),e.remove();var i=this.get(t).getId();i in this.currentStack&&delete this.currentStack.id}};var f=new c;e.default=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,i,n){var o="OVERLAY";"undefined"!=typeof t&&(o+=t),0===(0,l.default)("#"+o).length&&("undefined"==typeof e&&(e="body"),(0,l.default)(e).append('<div id="'+o+'" style="display:none;">&nbsp;</div>'));var s={display:"block",opacity:0,right:0,bottom:0,position:"absolute",top:0,zIndex:n,left:0};parseInt(n,10)>0&&(s.zIndex=parseInt(n,10)),"function"!=typeof i&&(i=function(){}),(0,l.default)("#"+o).css(s).addClass("overlay").fadeTo(500,.7).bind("click",function(){i()}),navigator.userAgent.match(/msie/i)&&navigator.userAgent.match(/6/)&&(0,l.default)("select").css({visibility:"hidden"})}function s(t){navigator.userAgent.match(/msie/i)&&navigator.userAgent.match(/6/)&&(0,l.default)("select").css({visibility:"visible"});var e="OVERLAY";"undefined"!=typeof t&&(e+=t),(0,l.default)("#"+e).hide().remove()}function a(t,e){if("undefined"==typeof e&&(e=!1),"disconnected"===t.status||"session"===t.status)return disconnected(),!1;if(e){var i=(0,l.default)("#notification_box");if(i.empty().append(t.notifications),i.is(":visible")&&fix_notification_height(),(0,l.default)(".notification.unread",i).length>0){var n=(0,l.default)("#notification_trigger");(0,l.default)(".counter",n).empty().append((0,l.default)(".notification.unread",i).length),(0,l.default)(".counter",n).css("visibility","visible")}else(0,l.default)("#notification_trigger .counter").css("visibility","hidden").empty();if(t.changed.length>0)for(var o=(0,l.default)(".SSTT.ui-state-active"),s=(o.length>0?o.attr("id").split("_").pop():!1,!1),a=0;a!==t.changed.length;a++){var r=(0,l.default)("#SSTT_"+t.changed[a]);0===r.size()?s===!1&&((0,l.default)("#baskets .bloc").animate({top:30},function(){(0,l.default)("#baskets .alert_datas_changed:first").show()}),s=!0):r.hasClass("active")?(0,l.default)(".alert_datas_changed",(0,l.default)("#SSTT_content_"+t.changed[a])).show():r.addClass("unread")}""!==l.default.trim(t.message)&&(0===(0,l.default)("#MESSAGE").length&&(0,l.default)("body").append('<div id="#MESSAGE"></div>'),(0,l.default)("#MESSAGE").empty().append('<div style="margin:30px 10px;"><h4><b>'+t.message+'</b></h4></div><div style="margin:20px 0px 10px;"><label class="checkbox"><input type="checkbox" class="dialog_remove" />'+language.hideMessage+"</label></div>").attr("title","Global Message").dialog({autoOpen:!1,closeOnEscape:!0,resizable:!1,draggable:!1,modal:!0,close:function(){(0,l.default)(".dialog_remove:checked",(0,l.default)(this)).length>0&&l.default.ajax({type:"POST",url:"/user/preferences/temporary/",data:{prop:"message",value:0},success:function(t){}})}}).dialog("open"))}return!0}Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),l=n(r),u=i(2),d=(n(u),i(7)),c=function(){var t=d.get("i18next");void 0===t&&(t="en-GB");var e=(0,l.default)("#mainMenu .helpcontextmenu");(0,l.default)(".context-menu-item",e).hover(function(){(0,l.default)(this).addClass("context-menu-item-hover")},function(){(0,l.default)(this).removeClass("context-menu-item-hover")})};e.default={initialize:c,showOverlay:o,hideOverlay:s,manageSession:a}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var i="pref_"+t;return a.default.data[i]&&a.default.data[i].abort&&(a.default.data[i].abort(),a.default.data[i]=!1),a.default.data[i]=a.default.ajax({type:"POST",url:"/user/preferences/",data:{prop:t,value:e},dataType:"json",timeout:a.default.data[i]=!1,error:a.default.data[i]=!1,success:function(t){return t.success?r.info(t.message):r.error(t.message),a.default.data[i]=!1,t}}),a.default.data[i]}Object.defineProperty(e,"__esModule",{value:!0});var s=i(1),a=n(s),r=i(6);r.info=r.spawn({addnCls:"humane-libnotify-info",timeout:1e3}),r.error=r.spawn({addnCls:"humane-libnotify-error",timeout:1e3}),r.forceNew=!0,e.default={setPref:o}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,i,n){return e(t)+e(i)+e(n)}function e(t){if(null===t)return"00";var e=parseInt(t,10);return 0===e||isNaN(e)?"00":(e=Math.max(0,e),e=Math.min(e,255),e=Math.round(e),"0123456789ABCDEF".charAt((e-e%16)/16)+"0123456789ABCDEF".charAt(e%16))}function i(t,e,i){var o=void 0,s=void 0,a=void 0,r=void 0,l=void 0,u=void 0;return 0===e?r=l=u=255*i:(s=.5>=i?i*(e+1):i+e-i*e,o=2*i-s,a=t/360,r=n(o,s,a+1/3),l=n(o,s,a),u=n(o,s,a-1/3)),{r:r,g:l,b:u}}function n(t,e,i){var n=void 0;return 0>i?i+=1:i>1&&(i-=1),n=1>6*i?t+(e-t)*i*6:1>2*i?e:2>3*i?t+(e-t)*(2/3-i)*6:t,255*n}function o(t){return t.altKey?!0:t.ctrlKey?!0:t.metaKey?!0:17===t.keyCode?!0:224===t.keyCode?!0:91===t.keyCode}function s(t){return!!t.shiftKey}return{RGBtoHex:t,hsl2rgb:i,is_ctrl_key:o,is_shift_key:s}}();e.default=i},function(t,e,i){!function(e,i,n){t.exports=n(e,i)}("humane",this,function(t,e){var i=window,n=document,o={on:function(t,e,n){"addEventListener"in i?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},off:function(t,e,n){"removeEventListener"in i?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},bind:function(t,e){return function(){t.apply(e,arguments)}},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},config:function(t,e){return null!=t?t:e},transSupport:!1,useFilter:/msie [678]/i.test(navigator.userAgent),_checkTransition:function(){var t=n.createElement("div"),e={webkit:"webkit",Moz:"",O:"o",ms:"MS"};for(var i in e)i+"Transition"in t.style&&(this.vendorPrefix=e[i],this.transSupport=!0)}};o._checkTransition();var s=function(t){t||(t={}),this.queue=[],this.baseCls=t.baseCls||"humane",this.addnCls=t.addnCls||"",this.timeout="timeout"in t?t.timeout:2500,this.waitForMove=t.waitForMove||!1,this.clickToClose=t.clickToClose||!1,this.timeoutAfterMove=t.timeoutAfterMove||!1,this.container=t.container;try{this._setupEl()}catch(e){o.on(i,"load",o.bind(this._setupEl,this))}};return s.prototype={constructor:s,_setupEl:function(){var t=n.createElement("div");if(t.style.display="none",!this.container){if(!n.body)throw"document.body is null";this.container=n.body}this.container.appendChild(t),this.el=t,this.removeEvent=o.bind(function(){var t=o.config(this.currentMsg.timeoutAfterMove,this.timeoutAfterMove);t?setTimeout(o.bind(this.remove,this),t):this.remove()},this),this.transEvent=o.bind(this._afterAnimation,this),this._run()},_afterTimeout:function(){o.config(this.currentMsg.waitForMove,this.waitForMove)?this.removeEventsSet||(o.on(n.body,"mousemove",this.removeEvent),o.on(n.body,"click",this.removeEvent),o.on(n.body,"keypress",this.removeEvent),o.on(n.body,"touchstart",this.removeEvent),this.removeEventsSet=!0):this.remove()},_run:function(){if(!this._animating&&this.queue.length&&this.el){this._animating=!0,this.currentTimer&&(clearTimeout(this.currentTimer),this.currentTimer=null);var t=this.queue.shift(),e=o.config(t.clickToClose,this.clickToClose);e&&(o.on(this.el,"click",this.removeEvent),o.on(this.el,"touchstart",this.removeEvent));var i=o.config(t.timeout,this.timeout);i>0&&(this.currentTimer=setTimeout(o.bind(this._afterTimeout,this),i)),o.isArray(t.html)&&(t.html="<ul><li>"+t.html.join("<li>")+"</ul>"),this.el.innerHTML=t.html,this.currentMsg=t,this.el.className=this.baseCls,o.transSupport?(this.el.style.display="block",setTimeout(o.bind(this._showMsg,this),50)):this._showMsg()}},_setOpacity:function(t){if(o.useFilter)try{this.el.filters.item("DXImageTransform.Microsoft.Alpha").Opacity=100*t}catch(e){}else this.el.style.opacity=String(t)},_showMsg:function(){var t=o.config(this.currentMsg.addnCls,this.addnCls);if(o.transSupport)this.el.className=this.baseCls+" "+t+" "+this.baseCls+"-animate";else{var e=0;this.el.className=this.baseCls+" "+t+" "+this.baseCls+"-js-animate",this._setOpacity(0),this.el.style.display="block";var i=this,n=setInterval(function(){1>e?(e+=.1,e>1&&(e=1),i._setOpacity(e)):clearInterval(n)},30)}},_hideMsg:function(){var t=o.config(this.currentMsg.addnCls,this.addnCls);if(o.transSupport)this.el.className=this.baseCls+" "+t,o.on(this.el,o.vendorPrefix?o.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent);else var e=1,i=this,n=setInterval(function(){e>0?(e-=.1,0>e&&(e=0),i._setOpacity(e)):(i.el.className=i.baseCls+" "+t,clearInterval(n),i._afterAnimation())},30)},_afterAnimation:function(){o.transSupport&&o.off(this.el,o.vendorPrefix?o.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent),this.currentMsg.cb&&this.currentMsg.cb(),this.el.style.display="none",this._animating=!1,this._run()},remove:function(t){var e="function"==typeof t?t:null;o.off(n.body,"mousemove",this.removeEvent),o.off(n.body,"click",this.removeEvent),o.off(n.body,"keypress",this.removeEvent),o.off(n.body,"touchstart",this.removeEvent),o.off(this.el,"click",this.removeEvent),o.off(this.el,"touchstart",this.removeEvent),this.removeEventsSet=!1,e&&this.currentMsg&&(this.currentMsg.cb=e),this._animating?this._hideMsg():e&&e()},log:function(t,e,i,n){var o={};if(n)for(var s in n)o[s]=n[s];if("function"==typeof e)i=e;else if(e)for(var s in e)o[s]=e[s];return o.html=t,i&&(o.cb=i),this.queue.push(o),this._run(),this},spawn:function(t){var e=this;return function(i,n,o){return e.log.call(e,i,n,o,t),e}},create:function(t){return new s(t)}},new s})},function(t,e,i){var n,o;!function(s){n=s,o="function"==typeof n?n.call(e,i,e,t):n,!(void 0!==o&&(t.exports=o))}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}function e(i){function n(e,o,s){var a;if(arguments.length>1){if(s=t({path:"/"},n.defaults,s),"number"==typeof s.expires){var r=new Date;r.setMilliseconds(r.getMilliseconds()+864e5*s.expires),s.expires=r}try{a=JSON.stringify(o),/^[\{\[]/.test(a)&&(o=a)}catch(l){}return o=i.write?i.write(o,e):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape),document.cookie=[e,"=",o,s.expires&&"; expires="+s.expires.toUTCString(),s.path&&"; path="+s.path,s.domain&&"; domain="+s.domain,s.secure?"; secure":""].join("")}e||(a={});for(var u=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,c=0;c<u.length;c++){var f=u[c].split("="),h=f[0].replace(d,decodeURIComponent),p=f.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{if(p=i.read?i.read(p,h):i(p,h)||p.replace(d,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(l){}if(e===h){a=p;break}e||(a[h]=p)}catch(l){}}return a}return n.get=n.set=n,n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(e,i){n(e,"",t(i,{expires:-1}))},n.withConverter=e,n}return e(function(){})})}])});